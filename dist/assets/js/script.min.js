function headerHandler(){const e=document.querySelector(".header"),t=document.querySelector(".menu__row_top"),o=t.nextElementSibling.querySelector(".menu__nav");if(document.querySelector(".standalone-menu")){const r=document.querySelector(".standalone-menu"),n=e.querySelector(".logo");window.addEventListener("scroll",()=>{r.getBoundingClientRect().bottom<0?(e.classList.add("fixed"),t.classList.add("hidden"),o.classList.add("active"),n.querySelector(".logo__main").style.display="none",n.querySelector(".logo__mobile").style.display="unset"):(e.classList.remove("fixed"),t.classList.remove("hidden"),o.classList.remove("active"),n.querySelector(".logo__main").style.display="",n.querySelector(".logo__mobile").style.display="none")})}else o.classList.add("active"),e.classList.add("fixed"),window.addEventListener("scroll",()=>{window.scrollY<100?t.classList.remove("hidden"):t.classList.add("hidden")})}function select(){document.querySelectorAll(".custom-select")&&document.querySelectorAll(".custom-select").forEach(e=>{const t=e.querySelector(".custom-select__header"),o=e.querySelectorAll(".custom-select__list-item > p"),r=e.querySelector(".custom-select__area");r.addEventListener("click",e=>{t.classList.remove("active"),r.classList.remove("active")}),t.addEventListener("click",e=>{t.classList.toggle("active"),r.classList.toggle("active"),o.forEach(e=>{e.parentElement.style.display="",e.textContent===t.querySelector("p").textContent&&(e.parentElement.style.display="none")})}),o.forEach(e=>{e.addEventListener("click",o=>{t.querySelector("p").textContent=e.textContent,t.classList.remove("active"),r.classList.remove("active")})})})}function handlerSwitch(){document.querySelectorAll(".switch")&&document.querySelectorAll(".switch").forEach(e=>{let t=e.querySelectorAll(".switch__btn"),o=e.querySelector(".switch__bg");t.forEach(e=>{e.classList.contains("active")&&(o.style.left=e.offsetLeft+"px",o.style.width=getComputedStyle(e).width),e.addEventListener("click",r=>{t.forEach(e=>{e.classList.remove("active")}),e.classList.add("active"),o.style.left=e.offsetLeft+"px",o.style.width=getComputedStyle(e).width})})})}function mobileMenuHandler(){document.querySelector(".menu__burger")&&(document.querySelector(".menu__burger").addEventListener("click",e=>{document.querySelector(".menu__burger").classList.toggle("active"),document.querySelector(".mobile-menu").classList.toggle("active"),document.querySelector(".header__menu").classList.add("active"),document.body.style.overflow="hidden",document.querySelector(".menu__burger.active")||setTimeout((function(){document.querySelector(".header__menu").classList.remove("active"),document.body.style.overflow=""}),300)}),document.querySelectorAll("[data-close-mobMenu]").forEach(e=>{e.addEventListener("click",()=>{document.querySelector(".header__menu").classList.remove("active"),document.querySelector(".menu__burger").classList.remove("active"),document.querySelector(".mobile-menu").classList.remove("active"),document.body.style.overflow=""})}))}function resetBtnHandler(){document.querySelector(".standard-btn[data-reset]")&&document.querySelector(".standard-btn[data-reset]").addEventListener("click",()=>{document.querySelectorAll(".filter-popup__filter-btn.active").forEach(e=>{e.classList.remove("active")})})}function startSlider(){$(".slick-slider").slick({arrows:!0,slidesToShow:4,slidesToScroll:1,infinite:!1,responsive:[{breakpoint:768,settings:{arrows:!1,slidesToShow:1,variableWidth:!0}}]})}function addTabsHandler(){if(!document.querySelector("[data-open-tab]"))return;const e=document.querySelectorAll("[data-open-tab]"),t=document.querySelectorAll("[data-tab]");e.forEach(e=>{e.addEventListener("click",()=>{t.forEach(t=>{t.classList.remove("active"),e.getAttribute("data-open-tab")===t.getAttribute("data-tab")&&t.classList.add("active")})})})}function openText(){if(document.querySelector(".about-delivery__show-more-btn")){let e=document.querySelector(".about-delivery__show-more-btn"),t=document.querySelector(".about-delivery__text");e.addEventListener("click",o=>{e.classList.add("active"),t.classList.toggle("active")})}}function summary(){document.querySelector(".order-list__item")&&document.querySelectorAll(".order-list__item").forEach(e=>{e.querySelectorAll(".order-details__svg-button").forEach(t=>{t.addEventListener("click",o=>{t.classList.toggle("active"),e.querySelector(".order-products").classList.toggle("active")})})})}function openOrderHistory(){if(document.querySelectorAll(".order-list__item")&&window.matchMedia("(max-width: 767px)").matches){document.querySelectorAll(".wrapper .order-list__item").forEach(e=>{e.setAttribute("href","order-details.html"),e.addEventListener("click",()=>{document.location.href=e.getAttribute("href")})})}}function changeAccountForm(){if(!document.querySelector(".personal-data__btn-change"))return;document.querySelectorAll(".account-data__list.account-data__list_data").forEach(e=>{const t=e.querySelector(".personal-data__btn-change"),o=e.querySelector(".account-data__list-btn");t.addEventListener("click",()=>{e.classList.add("active"),e.querySelectorAll(".input-text").forEach(e=>e.removeAttribute("disabled"))}),o.addEventListener("click",()=>{e.classList.remove("active"),e.querySelectorAll(".input-text").forEach(e=>e.getAttribute("disabled"))})})}function addTimeInputs(){document.querySelector(".payment__form-radio-row_time")&&document.querySelector(".payment__form-radio-row_time").querySelectorAll('input[name="time"]').forEach(e=>{e.addEventListener("click",()=>{"time"===e.value&&e.checked?document.querySelector(".payment__form-pick-date").classList.add("active"):document.querySelector(".payment__form-pick-date").classList.remove("active")})})}function auth(){if(document.querySelector(".menu__login")){const e=document.querySelector(".authorization-popup"),t=e.querySelectorAll(".authorization-content__block");let o=new Event("startTimer");e.querySelector(".authorization-content__button.standard-btn").addEventListener("click",()=>{t[0].classList.remove("active"),t[1].classList.add("active"),document.querySelector("[data-start-timer]").dispatchEvent(o)})}}function addAuthNextInput(){if(!document.querySelector(".authorization-content__input-data"))return;document.querySelectorAll("input.authorization-content__input-data").forEach(e=>{e.addEventListener("keyup",()=>{e.value.length===+e.getAttribute("maxlength")&&e.nextElementSibling&&e.nextElementSibling.focus()})})}function addToggleBtnsHandler(){document.querySelector(".toggle-btn")&&document.querySelectorAll(".toggle-btn").forEach(e=>{e.addEventListener("click",()=>{e.classList.toggle("active")})})}function addInputCountersHandler(){if(!document.querySelector(".input-counter"))return;document.querySelectorAll(".input-counter").forEach(e=>{const t=e.querySelector("[data-input-minus]"),o=e.querySelector("[data-input-plus]");let r=e.querySelector(".input-counter__num");t.addEventListener("click",()=>{let e=+r.textContent;e>0&&(r.textContent=--e)}),o.addEventListener("click",()=>{let e=+r.textContent;r.textContent=++e})})}function timerHandler(){if(!document.querySelector("[data-start-timer]"))return;const e=document.querySelector("[data-start-timer]");let t=59,o=null,r=new Event("endTimer");function n(){if(t<=0)return e.dispatchEvent(r),void clearInterval(o);e.querySelector("span").textContent=""+t,t--}e.addEventListener("startTimer",()=>{o=setInterval(n,1e3)}),e.addEventListener("endTimer",()=>{e.innerHTML="Отправить код ещё раз через: <button>Отправить</button>"})}function promoCodeHandler(){if(!document.querySelector(".payment__promo-btn"))return;const e=document.querySelector(".payment__promo-btn"),t=document.querySelector(".payment__promo-wrapper > input"),o=document.querySelector(".payment__promo-cost");e.addEventListener("click",()=>{"301202012"===t.value&&(o.innerHTML=`Итого: 2 199₽ <span class="payment__promo-cost-new">${o.textContent}</span>`)})}function popupsHandler(){if(!document.querySelector("[data-popup-name]"))return;const e=document.querySelectorAll("[data-popup-name]"),t=document.querySelector(".background-blur");e.forEach(e=>{let o=getPopup(e);handlerClosePopupElements(o),addClickListenerToOpenPopupElement(e,o,t)})}function getPopup(e){const t=e.getAttribute("data-popup-name");return document.querySelector("."+t)}function handlerClosePopupElements(e){if(!e.querySelector("[data-popup-close]"))return;e.querySelectorAll("[data-popup-close]").forEach(t=>{const o=+t.getAttribute("data-popup-close");o>0&&e.addEventListener("openPopup",()=>{setTimeout(()=>{e.classList.remove("active"),document.querySelector(".background-blur").classList.remove("active"),document.body.style.overflow=""},o)}),t.addEventListener("click",t=>{t.preventDefault(),e.classList.remove("active"),document.querySelector(".background-blur").classList.remove("active"),document.body.style.overflow=""})})}function addClickListenerToOpenPopupElement(e,t,o){let r=new Event("openPopup");e.addEventListener("click",n=>{n.preventDefault(),t.classList.add("active"),t.dispatchEvent(r),e.hasAttribute("data-scroll")||(document.body.style.overflow="hidden"),e.hasAttribute("data-open-blur")&&o.classList.add("active")})}function closePopupOnClickBlur(){document.querySelector(".background-blur")&&document.querySelector(".background-blur").addEventListener("click",()=>{document.querySelector(".popup.active").classList.remove("active"),document.querySelector(".background-blur").classList.remove("active"),document.body.style.overflow=""})}document.addEventListener("DOMContentLoaded",(function(){select(),handlerSwitch(),mobileMenuHandler(),resetBtnHandler(),startSlider(),addTabsHandler(),openText(),summary(),openOrderHistory(),promoCodeHandler(),changeAccountForm(),headerHandler(),addTimeInputs(),auth(),addAuthNextInput(),timerHandler(),addInputCountersHandler(),addToggleBtnsHandler(),popupsHandler(),closePopupOnClickBlur()}));